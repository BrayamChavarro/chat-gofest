rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Reglas para usuarios - m치s permisivas para permitir registro
    match /users/{userId} {
      // Permite lectura y escritura si el usuario est치 autenticado
      allow read, write: if request.auth != null;
      // Permite creaci칩n durante el registro
      allow create: if request.auth != null;
    }
    
    // Reglas para datos de recomendaciones
    match /recommendations/{recommendationId} {
      allow read, write: if request.auth != null;
    }
    
    // Reglas para datos de sesiones
    match /sessions/{sessionId} {
      allow read, write: if request.auth != null;
    }
    
    // Reglas para datos de an치lisis
    match /analytics/{analyticsId} {
      allow read, write: if request.auth != null;
    }
    
    // Regla general para otras colecciones
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}